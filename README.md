# Сервис авторизации

---
Сервис предоставляет возможность авторизировать клиента по JWT токену.
Пользователь может войти с нескольких устройств сразу.


#### Почему я решил написать этот проект?
1. Чтобы на примере разобраться с принципами SOLID
2. Закрепить опыт работы с typescript
3. Закрепить опыт реализации системы авторизации

#### Что используется?
1. nodejs
2. typescript

## Функционал
1. Регистрация
2. Вход
3. Восстановление доступа

### Как будет устроена работа с сервисом?
Работать с сервисом можно через REST-запросы.
### Подробно про функционал
#### 1. Регистрация
Пользователь отправляет запрос по адресу регистрации.
В тело запроса вставляет необходимые данные (имя, почту, пароль).
Сервер проверяет данные на валидность и существует ли пользователь с такой же почтой.
Создание записи в базе данных с данными пользователя.

#### 2. Вход
Пользователь отправляет запрос по адресу входа.
В тело запроса вставляет необходимые данные (почту, пароль).
Сервер проверяет данные на валидность, проверяет нет ли токена в куках запроса, сравнивает хеш полученного пароля с хешем пароля в базе данных.
Сервер генерирует JWT токен и возращает публичные данные о пользователе + токен в куки сохраняет

#### 3. Восстановление доступа
Пользователь отправляет запрос по адресу восстановления.
В тело запроса вставляет необходимые данные (почту).
Сервер проверяет данные. 
Создает токен восстановления.
Отправляет на почту письмо с ссылкой, в которой есть токен.
Пользователь отправляет запрос по этой ссылке с необходимыми данными в теле (новым паролем).
Сравнение хеша нового пароля с хешем старого.
Замена в базе хеша старого пароля на хеш нового.
